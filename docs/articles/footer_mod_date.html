<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="ericstrava">
<title>pkgdown: Adding a Date to the Footer • ericstrava</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="pkgdown: Adding a Date to the Footer">
<meta property="og:description" content="ericstrava">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">ericstrava</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../articles/ericstrava.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/footer_mod_date.html">pkgdown: Adding a Date to the Footer</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/esimms999/ericstrava/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>pkgdown: Adding a Date to the Footer</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/esimms999/ericstrava/blob/HEAD/vignettes/footer_mod_date.Rmd" class="external-link"><code>vignettes/footer_mod_date.Rmd</code></a></small>
      <div class="d-none name"><code>footer_mod_date.Rmd</code></div>
    </div>

    
    
<div class="section level4">
<h4 id="note-i-am-hoping-there-is-a-much-easier-way-to-do-this-please-let-me-know">Note: I am hoping there is a much easier way to do this! Please let
me know!<a class="anchor" aria-label="anchor" href="#note-i-am-hoping-there-is-a-much-easier-way-to-do-this-please-let-me-know"></a>
</h4>
<p><br> The default footer produced with
<code><a href="https://pkgdown.r-lib.org/reference/build_site.html" class="external-link">pkgdown::build_site()</a></code> looks like this: <br><br></p>
<p><img src="images/footer_mod_date_fig01.png" style="width:100.0%"></p>
<p><br> … and I would like to also display the date when the site was
last modified: <br><br></p>
<p><img src="images/footer_mod_date_fig02.png" style="width:100.0%"></p>
<p><br> I expected that pkgdown would have this available, but I have
not been successful in finding anything on this. When it comes to having
dates visible on package-related documentation, I did find this in <a href="https://r-pkgs.org/vignettes.html#metadata" class="external-link">R Packages: Chapter
17.2</a> which mentions the yaml for a vignette:</p>
<blockquote>
<p>date: we think this usually does more harm than good, since it’s not
clear what the date is meant to convey. Is it the last time the vignette
source was updated? In that case you’ll have to manage it manually and
it’s easy to forget to update it. If you manage date programmatically
with Sys.date(), the date reflects when the vignette was built,
i.e. when the package bundle was created, which has nothing to do with
when the vignette or package was last modified. We’ve decided it’s best
to omit the date.</p>
</blockquote>
<p><br> I think it is worthwhile to automatically display the date when
the entire site was last built, and to do so in a manner which makes it
obvious we are talking about the entire package. This is useful
information, which should be readily available, for developers and
users. Once in production, the reason(s) for modification can be
mentioned in the NEWS.md file.</p>
<p><br> The solution I have found involves the following:</p>
<ul>
<li>modifying _pkgdown.yml</li>
<li>setting the yaml.eval.expr option</li>
<li>modifying the github workflow</li>
</ul>
<p><br></p>
<p><strong>Modifying _pkgdown.yml</strong></p>
<p><br> According to the <a href="https://pkgdown.r-lib.org/reference/build_site.html#footer" class="external-link">pkgdown
documentation</a>, there are three pre-defined components available for
the <code>footer</code> block:</p>
<ul>
<li>
<code>developed_by</code>, a sentence describing the main authors of
the package</li>
<li>
<code>built_with</code>, a sentence advertising pkgdown</li>
<li>
<code>package</code>, the name of the package.</li>
</ul>
<p>and the default structure makes use of two of them:</p>
<pre><code><span><span class="va">footer</span><span class="op">:</span></span>
<span>  <span class="va">structure</span><span class="op">:</span> </span>
<span>    <span class="va">left</span><span class="op">:</span> <span class="va">developed_by</span></span>
<span>    <span class="va">right</span><span class="op">:</span> <span class="va">built_with</span></span></code></pre>
<p>Unfortunately, something like build_date is not available.</p>
<p>We can create our own components and these can be text or R
expressions. In my _pkgdown.yml, I have defined two components and then
specified, in the structure, where I want these components to
appear:</p>
<pre><code>footer:
  structure:
    left: developed_by
    right: [built_with, built_text, built_date]
  components:
    built_date: !expr "format(Sys.time(), '%Y-%m-%d %H:%M %Z')"
    built_text: "&lt;br&gt;on "</code></pre>
<p>Running <code><a href="https://pkgdown.r-lib.org/reference/build_site.html" class="external-link">pkgdown::build_site()</a></code> produces the following
footer:</p>
<p><br><img src="images/footer_mod_date_fig03.png" style="width:100.0%"></p>
<p><br><strong>yaml.eval.expr</strong> <br></p>
<p>By default, the ability to run R expressions in the _pkgdown.yml file
is turned off. This is done for security reasons because an entire file
of R statements could be pulled in and executed.</p>
<p>We can permit the evaluation of the R expression with
<code>options(yaml.eval.expr = TRUE)</code>. Running this in the console
and then <code><a href="https://pkgdown.r-lib.org/reference/build_site.html" class="external-link">pkgdown::build_site()</a></code> results in the date
expression being evaluated:</p>
<p><br><img src="images/footer_mod_date_fig04.png" style="width:100.0%"></p>
</div>
  </main>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by E. Simms.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7. <br>on 2023-09-27 20:18 UTC</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
